<!DOCTYPE html>
<html>
    <head>
        <title>stream</title>
        <link rel="stylesheet" href="../css/editor.css">
        <script language="javascript" src="../js/editor.js" type="module" async></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <meta name="viewport" content="user-scalable=0, maximum-scale=1, minimum-scale=1">
        <!-- meta gaming -->
        <meta name="title" content="stream">
        <!--<meta name="description" content="With stream, you can create node flows to test ideas, manage devices, and more all through a node-based editor.">-->
        <meta name="description" content="With stream, you can create node flows with pre-defined environments to create and innovate.">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-VG1B4YEZVS"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-VG1B4YEZVS');
        </script>
    </head>
    <body>
        <dialog id="readonly-warning">
            <form method="dialog">
                <h1>Uh oh!</h1>
                <p><i>You seem to be using a mobile or small device:</i></p>
                <p>You will only be able to view the flow, and not edit it.</p>
                <button onclick="this.parentElement.parentElement.style = 'display: none !important;'">Dismiss</button>
            </form>
        </dialog>
        <dialog id="text-input">
            <form method="dialog">
                <p>Enter new value:</p>
                <input id="text-input-value" type="text" onfocusout="this.parentElement.submit()" autocomplete="off" autofocus>
            </form>
        </dialog>
        <dialog id="select-input">
            <form method="dialog">
                <p>Enter new value:</p>
                <select id="select-input-value" onfocusout="this.parentElement.submit()" oninput="this.parentElement.submit()" autofocus></select>
            </form>
        </dialog>
        <dialog id="help-dialog">
            <form method="dialog">
                <h1>stream help</h1>
                <p>Hello! storm here :3</p>
                <h2>Disclaimer</h2>
                <p>This is merely a simulation of a simulation, and results in-game are not guaranteed to be accurate with results here.</p>
                <h3>Basics</h3>
                <div class="desktop">
                    <p>To add a node, drag it from the list on the left.</p>
                    <p>To connect nodes, click their connection points; intermediate points are extra for visual effect.</p>
                    <p>To see a points purpose and status, hover over it; same goes for connections.</p>
                </div>
                <div class="mobile">
                    <p>To add a node, tap on it in the list on the left and tap anywhere on the flow to add it.</p>
                    <p>To connect nodes, tap their connection points; intermediate points are extra for visual effect.</p>
                    <p>To see a points purpose and status, enter interaction mode and tap it.</p>
                </div>
                <h3>Nodes</h3>
                <div class="desktop">
                    <p>To select a node, click it anywhere (excluding select interactable parts if in the appropriate mode); hold shift to select multiple.</p>
                    <p>To drag nodes, select them and drag them.</p>
                    <p>To delete a node, select it/them and right click one of them.</p>
                </div>
                <div class="mobile">
                    <p>To select a node, tap it anywhere (excluding select interactable parts if in the appropriate mode).</p>
                    <p>To drag nodes, select them and drag them.</p>
                    <p>To delete a node, select it/them and drag them into the list of the left.</p>
                </div>
                <h3>Saving & Sharing</h3>
                <p>To save or share your creation, click the <span class="material-symbols-outlined">save</span> icon in the top right.</p>
                <p>To view some examples, click the <span class="material-symbols-outlined">topic</span> icon in the top right.</p>
                <h3>Connections</h3>
                <p>You can delete connections with right click</p>
                <p>You can add extra points by clicking and dragging anywhere on the connection</p>
                <p>You can move extra points by clicking and dragging the points</p>
                <p>You can delete extra points with right click</p>
                <p>You can change the color of the connection in the top left</p>
                <h3>Hotkeys & Advanced Features</h3>
                <p>Use <b id="keybind-rotate">R</b> to rotate nodes by 90deg increments -- <i>Some nodes may be selected/interacted weirdly while rotated, it'll be fixed at some point</i></p>
                <p>Use <b id="keybind-clone">E</b> to clone a connection at a hovered point, requires at least 1 extra point (aka: that isn't output to input)</p>
                <p>Use <b id="keybind-clone">F</b> to clone selected nodes (and the nodes' associated connections)</p>
                <p>Hold <b id="keybind-persist">Shift</b> while placing connections to continue placing connections</p>
                <p>Hold <b id="keybind-snap">Shift</b> while dragging nodes to snap them to the grid, you can't move them during however, planning to change</p>
                <p>Hold <b id="keybind-lasso">Control</b> and drag to multi-select; it's based on the nodes upper most left point at zero rotation.</p>
                <p>You can enable interaction mode in the top left, letting you only "interact", being button presses and changing values while disabling node/connection movement. Useful for testing arrays of buttons and such.</p>
                <!--<p>Press <b>Ctrl + Q</b> to enter/exit debug mode, and press <b>Q</b> to step a single update tick; green nodes are updated nodes, the brighter the farther from the source</p>
                <p>Press <b>P</b> to see a performance summary of the last frame/update</p>-->
                <h2>Contributing & Support</h2>
                <p>If you wish to create any PRs or even dare look at the "<i>codebase</i>", goodluck.</p>
                <p class="inline">For any suggestions/etc. contact <div class="spoiler">me</div> on discord</p>
                <br />
                <p><i>"stream", "flow", get it? hehehe</i></p>
                <br />
                <button>Close</button>
            </form>
        </dialog>
        <dialog id="share-input">
            <form method="dialog">
                <h1>done</h1>
                <p>The page's URL has been updated with the saved flow.</p>
                <p><i>To share it, copy it and send it wherever you so desire... it's pretty long though!</i></p>
                <br />
                <p>At some point it might grow too large to where inputting it will give you a http error (431), this is where you download it instead!</p>
                <br />
                <p><i>Click/tap anywhere to close</i></p>
                <button onfocusout="this.parentElement.submit()" style="height: 0; border: none; position: absolute;" focused></button>
            </form>
        </dialog>
        <dialog id="example-dialog">
            <form method="dialog">
                <h1>stream examples</h1>
                <h3>Here is some examples to get you started:</h3>
                <p><i>Clicking/interacting will replace the URL deleting any progress, beware!</i></p><br />
                <br />
                <p><button value="new">New</button> <i>Create a blank flow</i></p>
                <br />
                <p><button value="logic_gates">Logic Gate Comparisons</button> <i>All of the logic gates in a "truth table" format</i></p>
                <br />
                <p><button value="tetherness">Tether Madness</button> <i>Fun fact you can do with looping wires</i></p>
                <br />
                <p><button value="binary">Counting w/ Binary</button> <i>Using binary outputs, count with binary!</i></p>
                <br />
                <p><button value="basic_counter">Basic LED Counter</button> <i>Using some basic logic to increment a counter for a multi-functional system</i></p>
                <br />
                <p><button value="keyboard">Keyboard</button> <i>The magic of blockers to create a keyboard (made by yours truly)</i></p>
                <br /><br />
                <button onfocusout="this.parentElement.parentElement.returnValue = '#close'; this.parentElement.submit()" value="#close">Nevermind</button>
            </form>
        </dialog>
        <dialog id="general-notice">
            <form method="dialog">
                <h1 id="general-notice-title">summary</h1>
                <p id="general-notice-body"></p>
                <br />
                <button>Alrighty</button>
            </form>
        </dialog>
        <dialog id="settings-dialog">
            <form method="dialog">
                <h1>settings</h1>
                <p>Click to change a keybind.</p>
                <h3 id="keybinds">keybinds</h3>
                <p class="mobile">You cannot have keybinds, you goob!</p>
                <h3>other</h3>
                <br />
                <button>Close</button>
            </form>
        </dialog>
        <dialog id="summary-notice">
            <form method="dialog">
                <h1>summary</h1>
                <h3>Nodes</h3>
                <p id="summary-nodes">x1 cheese<br />x3 spaghetti</p>
                <h3>Connections</h3>
                <p id="summary-connections">x1 cheese<br />x3 spaghetti</p>
                <br />
                <button>Alrighty</button>
            </form>
        </dialog>
        <dialog id="saving-notice">
            <form method="dialog">
                <h1>saving...</h1>
                <p>bigger flows mean bigger goals!</p>
                <p><i id="saving-notice-status"></i></p>
            </form>
        </dialog>
        <nav id="topbar">
            <div id="heading">
                <h2>stream</h2>
                <textarea id="file-name" rows="1" placeholder="Unnamed Flow" autocomplete="off" spellcheck="false"></textarea>
            </div>
            <div id="buttons">
                <button id="hamburger" class="button">
                    <span class="icon material-symbols-outlined">menu</span>
                </button>
                <ul id="buttons-list">
                    <li><button id="upload" class="button">
                        <span class="icon material-symbols-outlined">upload</span>
                        <span class="tooltip">Upload</span>
                    </button></li>
                    <li><button id="download" class="button">
                        <span class="icon material-symbols-outlined">download</span>
                        <span class="tooltip">Download</span>
                    </button></li>
                    <li><button id="save" class="button">
                        <span class="icon material-symbols-outlined">save</span>
                        <span class="tooltip">Save</span>
                    </button></li>
                    <li><button id="examples" class="button">
                        <span class="icon material-symbols-outlined">topic</span>
                        <span class="tooltip">Examples</span>
                    </button></li>
                    <li><button id="summary" class="button">
                        <span class="icon material-symbols-outlined">summarize</span>
                        <span class="tooltip">Summary</span>
                    </button></li>
                    <li><button id="help" class="button">
                        <span class="icon material-symbols-outlined">help</span>
                        <span class="tooltip">Help</span>
                    </button></li>
                    <li><button id="settings" class="button">
                        <span class="icon material-symbols-outlined">settings</span>
                        <span class="tooltip">Settings</span>
                    </button></li>
                    <li><button id="fullscreen" class="button">
                        <span class="icon material-symbols-outlined">fullscreen</span>
                        <span class="tooltip">Fullscreen</span>
                    </button></li>
                </ul>
            </div>
        </nav>
        <input id="file" type="file" accept=".flow" hidden />
        <div id="content">
            <div id="sidebar">
                <!--<div class="category"><input type="search" autocapitalize="no" autocomplete="no" id="search"></div>-->
                <!--
                <div class="category"><span>logic gates</span></div>
                <div class="category-items">
                    <div class="category-item"><img width="40" height="40" src="https://static.wikia.nocookie.net/oaklands/images/c/c7/ANDComponent.png"><span>AND</span></div>
                </div>
                -->
            </div>
            <canvas id="chart">
            </canvas>
            <div id="edit-options">
                <div>
                    <span>Connection Color:</span>
                    <div id="connection-colors">
                        <div>
                            <div value="#ea3030"></div>
                            <!--<div value="#9c2020"></div>-->

                            <div value="#de742e"></div>
                            <!--<div value="#8d481d"></div>-->
                            
                            <div value="#e3d253"></div>
                            <!--<div value="#877c31"></div>-->
                            
                            <div value="#44c548"></div>
                            <!--<div value="#226223"></div>-->
                            
                            <div value="#4d88da"></div>
                            <!--<div value="#26446c"></div>-->
                            
                            <div value="#43cfc3"></div>
                            <!--<div value="#20635c"></div>-->
                            
                            <div value="#ef61d0"></div>
                            <!--<div value="#843573"></div>-->
                            
                            <div value="#7c3dc3"></div>
                            <!--<div value="#3f1f64"></div>-->
                            
                            <div value="#cfcfcf"></div>
                            <!--<div value="#707070"></div>-->
                            
                            <div value="#000000"></div>
                        </div>
                        <div>
                            <div value="#9c2020"></div>
    
                            <div value="#8d481d"></div>
                            
                            <div value="#877c31"></div>
                            
                            <div value="#226223"></div>
                            
                            <div value="#26446c"></div>
                            
                            <div value="#20635c"></div>
                            
                            <div value="#843573"></div>
                            
                            <div value="#3f1f64"></div>
                            
                            <div value="#707070"></div>
                            
                            <div value="#1a1a1a"></div>
                        </div>
                    </div>
                    <input value="#ff0000" type="color" id="connection-color">
                </div>
                <div style="margin-top: 1rem;"><span>Mode:</span><select id="mode-select">
                    <option value="all">All</option>
                    <option value="organize">Organize</option>
                    <option value="connect">Connect</option>
                    <option value="interact">Interact</option>
                </select><label class="mobile" for="mode-delete"> | Delete</label><input id="mode-delete" class="mobile" type="checkbox"></div>
                <!--<div style="margin-top: 1rem;"><span>Interaction Mode:</span><input id="interaction-mode" type="checkbox"></div>-->
                <div><button id="edit-toggle">&lt;</button></div>
            </div>
        </div>
    </body>
</html>